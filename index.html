<!doctype html>
<html ng-app="formApp">
<head>
  <title>Facebook Search</title>
  <!-- LOAD BOOTSTRAP CSS -->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="hw8.css">
</head>
<!-- apply the module and controller to our body so angular is applied to that -->
<body ng-controller="formController">

<div class="navbar navbar-default" style="margin-bottom: 0px;">
  <div class="navbar-brand" style="color:rgb(59,89,152);">FB Search</div>
  <div class="col-md-offset-4 col-xs-offset-0"> <!-- offset of the form -->
  <form class="navbar-form" id="searchForm" role="search" ng-submit="processForm(keyword)">
      <div class="input-group col-md-5 col-xs-5">
        <input name="keyword" type="text" class="form-control" required="required" placeholder="Search" ng-model="keyword">
        <div class="input-group-btn">
            <button class="btn btn-default" type="submit" style="background-color:rgb(59,89,152); color:white;"><i class="glyphicon glyphicon-search"></i></button>
        </div>
      </div>
      <button class="btn col-xs-1" type="reset" ng-click="clearAll()" style="color: rgb(59,89,140); border-color:rgb(59,89,152); background-color: white;">Clear</button>
    </form>
  </div>
</div>

<div class="navbar"> <!-- tabs-->
  <ul class="col-md-12 nav nav-tabs" style="text-align: center;">
  <li class="col-md-2 {{(activeTab === 1) ? 'tabActive' : 'tabInactive'}}" ng-click="tab = 1;activeTab=1;detailsActive=false;activeAlbum=0"><a href="#">Users</a></li>
  <li class="col-md-2 {{(activeTab === 2) ? 'tabActive' : 'tabInactive'}}" ng-click="tab = 2;activeTab=2;detailsActive=false;activeAlbum=0"><a href="#">Pages</a></li>
  <li class="col-md-2 {{(activeTab === 3) ? 'tabActive' : 'tabInactive'}}" ng-click="tab = 3;activeTab=3;detailsActive=false;activeAlbum=0"><a href="#">Events</a></li>
  <li class="col-md-2 {{(activeTab === 4) ? 'tabActive' : 'tabInactive'}}" ng-click="tab = 4;activeTab=4;detailsActive=false;activeAlbum=0"><a href="#">Places</a></li>
  <li class="col-md-2 {{(activeTab === 5) ? 'tabActive' : 'tabInactive'}}" ng-click="tab = 5;activeTab=5;detailsActive=false;activeAlbum=0"><a href="#">Groups</a></li>
  <li class="col-md-2 {{(activeTab === 6) ? 'tabActive' : 'tabInactive'}}" ng-click="tab = 6;activeTab=6;detailsActive=false;activeAlbum=0"><a href="#">Favorites</a></li>
  </ul>
</div>

<div class="progress progress-striped active" ng-show="process">
  <div class="progress-bar"  role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 50%">
  </div>
</div>
<div id="resultData" style="display: none;"><!-- -->
  <div class="container {{ (tab === 1) ? 'active' : 'inactive'}}"> 
    <table class="table table-hover">
      <thead>
        <tr><th>#</th><th>Profile photo</th><th>Name</th><th>Favorite</th><th>Details</th></tr>
      </thead>

      <tbody>
        <tr ng-repeat="item in json_file.user.data">
        <td>{{$index + 1}}</td>
        <td><img class="img-circle" src="{{item.picture.data.url}}", height="30px" width="30px"></td>
        <td>{{item.name}}</td>
        <td><a href class="btn btn-default" ng-click="localStore(item);"><span class="glyphicon glyphicon-star-empty" ng-show="getLocalStore(item.id) === false"></span><span class="glyphicon glyphicon-star icon-success" ng-show="getLocalStore(item.id)"></span></a></td>
        <td><a href="#" class="btn btn-default" ng-click="$parent.tab=0;$parent.activeTab=1;$parent.detailsActive = true;loadDetails(item.id)"><span class="glyphicon glyphicon-chevron-right"></span></a></td>
        </tr>
      </tbody>

    </table>
    <div style="margin-left: 45%;margin-bottom: 80px;">
    <a href="#" class="btn btn-default {{ userpreActive ? 'preActive' : 'preInactive'}}" ng-click="pagination(json_file.user.paging.previous, 'user')">Previous</a>
    <a href="#" class="btn btn-default {{ usernextActive ? 'nextActive' : 'nextInactive'}}" ng-click="pagination(json_file.user.paging.next, 'user')">Next</a>
    </div>
  </div>

  <div class="container {{ (tab === 2) ? 'active' : 'inactive'}}">
    <table class="table table-hover">
      <thead>
        <tr><th>#</th><th>Profile photo</th><th>Name</th><th>Favorite</th><th>Details</th></tr>
      </thead>

      <tbody>
        <tr ng-repeat="item in json_file.page.data">
        <td>{{$index + 1}}</td>
        <td><img class="img-circle" src="{{item.picture.data.url}}", height="30px" width="30px"></td>
        <td>{{item.name}}</td>
        <td><a href class="btn btn-default" ng-click="localStore(item);"><span class="glyphicon glyphicon-star-empty" ng-show="getLocalStore(item.id) === false"></span><span class="glyphicon glyphicon-star icon-success" ng-show="getLocalStore(item.id)"></span></a></td>
        <td><a href="#" class="btn btn-default" ng-click="$parent.tab=0;$parent.activeTab=2;$parent.detailsActive = true;loadDetails(item.id)"><span class="glyphicon glyphicon-chevron-right"></span></a></td>
        </tr>
      </tbody>
      
    </table>

    <div style="margin-left: 45%;margin-bottom: 80px;">
    <a href="#" class="btn btn-default {{ pagepreActive ? 'preActive' : 'preInactive'}}" ng-click="pagination(json_file.page.paging.previous, 'page')">Previous</a>
    <a href="#" class="btn btn-default {{ pagenextActive ? 'nextActive' : 'nextInactive'}}" ng-click="pagination(json_file.page.paging.next, 'page')">Next</a>
    </div>
  </div>

  <div class="container {{ (tab === 3) ? 'active' : 'inactive'}}"> 
    <table class="table table-hover">
      <thead>
        <tr><th>#</th><th>Profile photo</th><th>Name</th><th>Favorite</th><th>Details</th></tr>
      </thead>

      <tbody>
        <tr ng-repeat="item in json_file.event.data">
        <td>{{$index + 1}}</td>
        <td><img class="img-circle" src="{{item.picture.data.url}}", height="30px" width="30px"></td>
        <td>{{item.name}}</td>
        <td><a href class="btn btn-default" ng-click="localStore(item);"><span class="glyphicon glyphicon-star-empty" ng-show="getLocalStore(item.id) === false"></span><span class="glyphicon glyphicon-star icon-success" ng-show="getLocalStore(item.id)"></span></a></td>
        <td><a href="#" class="btn btn-default" ng-click="$parent.tab=0;$parent.activeTab=3;$parent.detailsActive = true;$parent.detailsNoAlbums=true;$parent.detailsNoPosts=true;addDetails(item);"><span class="glyphicon glyphicon-chevron-right"></span></a></td>
        </tr>
      </tbody>
    </table>
    <div style="margin-left: 45%;margin-bottom: 80px;">
      <a href="#" class="btn btn-default {{ eventpreActive ? 'preActive' : 'preInactive'}}" ng-click="pagination(json_file.event.paging.previous, 'event')">Previous</a>
      <a href="#" class="btn btn-default {{ eventnextActive ? 'nextActive' : 'nextInactive'}}" ng-click="pagination(json_file.event.paging.next, 'event')">Next</a>
    </div>
  </div>

  <div class="container {{ (tab === 4) ? 'active' : 'inactive'}}"> 
    <table class="table table-hover">
      <thead>
        <tr><th>#</th><th>Profile photo</th><th>Name</th><th>Favorite</th><th>Details</th></tr>
      </thead>

      <tbody>
        <tr ng-repeat="item in json_file.place.data">
        <td>{{$index + 1}}</td>
        <td><img class="img-circle" src="{{item.picture.data.url}}", height="30px" width="30px"></td>
        <td>{{item.name}}</td>
        <td><a href class="btn btn-default" ng-click="localStore(item);"><span class="glyphicon glyphicon-star-empty" ng-show="getLocalStore(item.id) === false"></span><span class="glyphicon glyphicon-star icon-success" ng-show="getLocalStore(item.id)"></span></a></td>
        <td><a href="#" class="btn btn-default" ng-click="$parent.tab=0;$parent.activeTab=4;$parent.detailsActive = true;loadDetails(item.id)"><span class="glyphicon glyphicon-chevron-right"></span></a></td>
        </tr>
      </tbody>
      
    </table>

    <div style="margin-left: 45%;margin-bottom: 80px;">
      <a href="#" class="btn btn-default {{ placepreActive ? 'preActive' : 'preInactive'}}" ng-click="pagination(json_file.place.paging.previous, 'place')">Previous</a>
      <a href="#" class="btn btn-default {{ placenextActive ? 'nextActive' : 'nextInactive'}}" ng-click="pagination(json_file.place.paging.next, 'place')">Next</a>
    </div>
  </div>

  <div class="container {{ (tab === 5) ? 'active' : 'inactive'}}"> 
    <table class="table table-hover">
      <thead>
        <tr><th>#</th><th>Profile photo</th><th>Name</th><th>Favorite</th><th>Details</th></tr>
      </thead>

      <tbody>
        <tr ng-repeat="item in json_file.group.data">
        <td>{{$index + 1}}</td>
        <td><img class="img-circle" src="{{item.picture.data.url}}", height="30px" width="30px"></td>
        <td>{{item.name}}</td>
        <td><a href class="btn btn-default" ng-click="localStore(item);"><span class="glyphicon glyphicon-star-empty" ng-show="getLocalStore(item.id) === false"></span><span class="glyphicon glyphicon-star icon-success" ng-show="getLocalStore(item.id)"></span></a></td>
        <td><a href="#" class="btn btn-default" ng-click="$parent.tab=0;$parent.activeTab=5;$parent.detailsActive = true;loadDetails(item.id)"><span class="glyphicon glyphicon-chevron-right"></span></a></td>
        </tr>
      </tbody>
    </table>
    <div style="margin-left: 45%;margin-bottom: 30px;position: relative;">
      <a href="#" class="btn btn-default {{ grouppreActive ? 'preActive' : 'preInactive'}}" ng-click="pagination(json_file.group.paging.previous, 'group')">Previous</a>
      <a href="#" class="btn btn-default {{ groupnextActive ? 'nextActive' : 'nextInactive'}}" ng-click="pagination(json_file.group.paging.next, 'group')">Next</a>
    </div>
  </div>

  <div class="container {{ (tab === 6) ? 'active' : 'inactive'}}"> 
    <table class="table table-hover">
      <thead>
        <tr><th>#</th><th>Profile photo</th><th>Name</th><th>Type</th><th>Favorite</th><th>Details</th></tr>
      </thead>

      <tbody>
        <tr ng-repeat="item in json_localStore">
        <td>{{$index + 1}}</td>
        <td><img class="img-circle" src="{{item.picture.data.url}}", height="30px" width="30px"></td>
        <td>{{item.name}}</td>
        <td>{{item.type}}s</td>
        <td><a href class="btn btn-default" ng-click="localStore(item);"><span class="glyphicon glyphicon-trash" ng-show="getLocalStore(item.id)"></span></a></td>
        <td><a href="#" class="btn btn-default" ng-click="$parent.tab=0;$parent.activeTab=6;$parent.detailsActive = true;loadDetails(item.id,item.type,item)"><span class="glyphicon glyphicon-chevron-right"></span></a></td>
        </tr>
      </tbody>
      
    </table>
  </div>

  <div class="panel {{ detailsActive ? 'active' : 'inactive'}}">
    <div> <!-- buttons -->
      <div class="col-md-1">
      <a href="#" class="btn btn-default col-xs-3" ng-click="tab = activeTab;detailsActive=false;activeAlbum=0"><span class="glyphicon glyphicon-chevron-left"></span>Back</a>
      </div>

      <div class="col-md-9 col-xs-9"></div>

      <div class="col-md-2">
      <a href class="btn btn-default col-xs-3" ng-click="localStore(details_file);"><span class="glyphicon glyphicon-star-empty" ng-show="getLocalStore(details_file.id) === false"></span><span class="glyphicon glyphicon-star icon-success" ng-show="getLocalStore(details_file.id)"></span></a>
      <a href="#" class="btn btn-default col-xs-3" ng-click="shareOnFacebook(details_file.name,details_file.picture.data.url)"><img src="http://cs-server.usc.edu:45678/hw/hw8/images/facebook.png" width="20px" height="20px"></a>
      </div>
    </div>


    <div class="albums panel panel-default col-md-5 col-xs-6" style="margin-bottom: 100px;">
      <div class="panel-heading" style="margin-bottom: 5px">Albums</div>

      <div class="progress progress-striped active" ng-show="processDetails">
        <div class="progress-bar"  role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 50%">
        </div>
      </div>

      <div class="albumsContent panel-body {{detailsNoAlbums ? 'inactive' : 'active'}}" ng-repeat="item in details_file.albums.data">
        <div class="panel panel-default">
          <div class="panel-heading"><a href ng-click="changeAlbumItem($index)">{{item.name}}</a></div>
          <div class="panel-body {{ ($index === $parent.activeAlbum) ? 'albumPhotoActive' : 'albumPhotoInActive'}}">
            <div class="panel-body" ng-repeat="photoItem in item.photos.data"><img src="{{photoItem.picture}}" width="100%" height="100%"></div>
          </div>
        </div>
      </div>

      <div class="panel panel-warning detailsNoAlbums {{ detailsNoAlbums ? 'active' : 'inactive' }}"><div class="panel-heading">No data found.</div></div>
    </div>

    <div class="col-md-1 col-xs-1"></div>
    <div class="posts panel panel-default col-md-5 col-xs-6">
      <div class="panel-heading">Posts</div>

      <div class="progress progress-striped active" ng-show="processDetails">
        <div class="progress-bar"  role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 50%">
        </div>
      </div>

      <div class="postsContent panel-body {{detailsNoPosts ? 'inactive' : 'active'}}" ng-repeat="item in details_file.posts.data">
        <div class="panel panel-default">
          <div class="panel-body"><img src="{{$parent.details_file.picture.data.url}}" width="8%" height="8%"><b style="margin-left: 10px;">{{$parent.details_file.name}}</b>
          <div style="color:gray;margin-left:45px;margin-top:-10px;">{{convertTime(item.created_time)}}{{$parent.convertedTime}}
          </div>
          {{item.message}}
          </div>
        </div>
      </div>

      <div class="panel panel-warning detailsNoPosts {{ detailsNoPosts ? 'active' : 'inactive' }}"><div class="panel-heading">No data found.</div></div>
    </div>
  </div>


</div>



  <!-- LOAD JQUERY -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <!-- LOAD ANGULAR -->
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script>
  <!-- PROCESS FORM WITH AJAX (NEW) -->
  <script type="text/javascript" src="hw8.js"></script>
  <!-- FB SHARE SDK-->
  <script src="http://connect.facebook.net/en_US/all.js"></script>
  <!-- LOAD MOMENT -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.7.0/moment.min.js" type="text/javascript"></script>
</body>
</html>